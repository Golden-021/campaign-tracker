<!DOCTYPE html>
<html>
<head>
  <title>Database & Campaign Entry</title>
  <style>
    body { font-family: Arial; background: #f2f2f2; padding: 20px; }
    .box { background: white; padding: 20px; max-width: 600px; margin: auto; border-radius: 8px; }
    input, select, textarea, button { width: 100%; margin-top: 10px; padding: 8px; font-size: 15px; }
    h2 { text-align: center; }
    .section { margin-bottom: 30px; }
    #spinner {
      display: none;
      margin: 20px auto;
      border: 6px solid #eee;
      border-top: 6px solid #555;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="box">
    <h2>Add Database Details</h2>
    <form id="dbForm">
      <div class="section">
        <input type="text" name="name" placeholder="Database Name" required>
        <input type="text" name="source" placeholder="Source" required>
        <input type="text" name="industry" placeholder="Industry" required>
        <input type="number" name="totalRecords" placeholder="Total No. of Records" required>
        <input type="number" name="noOfEmails" placeholder="No. of Emails" required>
        <input type="number" name="noOfValidEmails" placeholder="No. of Valid Emails" required>
        <input type="number" name="noOfMobile" placeholder="No. of Mobile No." required>
        <input type="number" name="noOfValidWhatsApp" placeholder="No. of WhatsApp Valid Mobile No." required>
        <textarea name="description" placeholder="Description"></textarea>
        <button type="button" onclick="addDatabase()">Add Database</button>
      </div>
    </form>

    <h2>Add Campaign Details</h2>
    <form id="campaignForm">
      <div class="section">
        <input type="text" name="databaseName" placeholder="Database Name" required>
        <select name="campaignType" required>
          <option value="">Select Campaign Type</option>
          <option value="whatsapp1">WhatsApp 1</option>
          <option value="whatsapp2">WhatsApp 2</option>
          <option value="email1">Email 1</option>
          <option value="email2">Email 2</option>
          <option value="telecalling">Telecalling</option>
        </select>
        <input type="date" name="date" required>
        <input type="number" name="noOfRecords" placeholder="No. of Records" required>
        <input type="number" name="noOfLeads" placeholder="No. of Leads Came" required>
        <button type="button" onclick="addCampaign()">Add Campaign</button>
      </div>
    </form>
    <div id="spinner"></div>
    <div id="msg"></div>
  </div>
  <script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbzHlUoTop8QFLSfEG6aNqdpFAYxTdYs56BHcxGylZRAaJRQFK9fEmH8Qxg8HiTpALh66g/exec'; // Replace with your Apps Script Web App URL

    function showSpinner() {
      document.getElementById('spinner').style.display = 'block';
    }
    function hideSpinner() {
      document.getElementById('spinner').style.display = 'none';
    }

    function addDatabase() {
      const form = document.getElementById('dbForm');
      const data = Object.fromEntries(new FormData(form).entries());
      showSpinner();
      fetch(scriptUrl + '?action=addDatabase', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(res => {
        document.getElementById('msg').textContent = res.success ? "Database added!" : "Error adding database.";
        if (res.success) form.reset();
        hideSpinner();
      })
      .catch(() => { hideSpinner(); });
    }

    function addCampaign() {
      const form = document.getElementById('campaignForm');
      const data = Object.fromEntries(new FormData(form).entries());
      showSpinner();
      fetch(scriptUrl + '?action=addCampaign', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(res => {
        document.getElementById('msg').textContent = res.success ? "Campaign added!" : "Error adding campaign.";
        if (res.success) form.reset();
        hideSpinner();
      })
      .catch(() => { hideSpinner(); });
    }
  </script>
</body>
</html>
