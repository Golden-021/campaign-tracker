<!DOCTYPE html>
<html>
<head>
  <title>Database & Campaign Entry</title>
  <style>
    body { font-family: Arial; background: #f2f2f2; padding: 20px; }
    .box { background: white; padding: 20px; max-width: 600px; margin: auto; border-radius: 8px; }
    input, select, textarea, button { width: 100%; margin-top: 10px; padding: 8px; font-size: 15px; }
    h2 { text-align: center; }
    .section { margin-bottom: 30px; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Add Database Details</h2>
    <form id="dbForm">
      <div class="section">
        <input type="text" name="name" placeholder="Database Name" required>
        <input type="text" name="source" placeholder="Source" required>
        <input type="text" name="industry" placeholder="Industry" required>
        <input type="number" name="totalRecords" placeholder="Total No. of Records" required>
        <input type="number" name="noOfEmails" placeholder="No. of Emails" required>
        <input type="number" name="noOfValidEmails" placeholder="No. of Valid Emails" required>
        <input type="number" name="noOfMobile" placeholder="No. of Mobile No." required>
        <input type="number" name="noOfValidWhatsApp" placeholder="No. of WhatsApp Valid Mobile No." required>
        <textarea name="description" placeholder="Description"></textarea>
        <button type="button" onclick="addDatabase()">Add Database</button>
      </div>
    </form>

    <h2>Add Campaign Details</h2>
    <form id="campaignForm">
      <div class="section">
        <select id="dbDropdown"></select>
        <select name="campaignType" required>
          <option value="">Select Campaign Type</option>
          <option value="whatsapp1">WhatsApp 1</option>
          <option value="whatsapp2">WhatsApp 2</option>
          <option value="email1">Email 1</option>
          <option value="email2">Email 2</option>
          <option value="telecalling">Telecalling</option>
        </select>
        <input type="date" name="date" required>
        <input type="number" name="noOfRecords" placeholder="No. of Records" required>
        <input type="number" name="noOfLeads" placeholder="No. of Leads Came" required>
        <button type="button" onclick="addCampaign()">Add Campaign</button>
      </div>
    </form>
    <div id="msg"></div>
  </div>
  <script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbwKRcADsekD-6gYlyD5YNMDA0FwnaKGuSJhuFdyvwpiz9cjHvSrN5TAxp1J2zMD_NrvZg/exec'; // Replace with your Apps Script Web App URL

    function addDatabase() {
      const form = document.getElementById('dbForm');
      const data = Object.fromEntries(new FormData(form).entries());
      fetch(scriptUrl + '?action=addDatabase', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(res => {
        document.getElementById('msg').textContent = res.success ? "Database added!" : "Error adding database.";
        if (res.success) form.reset();
      });
    }

    function addCampaign() {
      const form = document.getElementById('campaignForm');
      const data = Object.fromEntries(new FormData(form).entries());
      fetch(scriptUrl + '?action=addCampaign', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(res => {
        document.getElementById('msg').textContent = res.success ? "Campaign added!" : "Error adding campaign.";
        if (res.success) form.reset();
      });
    }
  </script>
</body>
</html>
